<form id="contact-form" class="space-y-6">
  <div class="grid gap-6 sm:grid-cols-2">
    <div>
      <label for="naam" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Naam <span class="text-red-500">*</span>
      </label>
      <input
        type="text"
        id="naam"
        name="naam"
        required
        placeholder="Je naam"
        class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
      />
    </div>

    <div>
      <label for="bedrijfsnaam" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Bedrijfsnaam
      </label>
      <input
        type="text"
        id="bedrijfsnaam"
        name="bedrijfsnaam"
        placeholder="Je bedrijfsnaam"
        class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
      />
    </div>
  </div>

  <div class="grid gap-6 sm:grid-cols-2">
    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        E-mailadres <span class="text-red-500">*</span>
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="je@email.nl"
        class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
      />
      <p id="email-error" class="mt-1 hidden text-sm text-red-600"></p>
    </div>

    <div>
      <label for="telefoon" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Telefoonnummer
      </label>
      <input
        type="tel"
        id="telefoon"
        name="telefoon"
        placeholder="06 - 1234 5678"
        class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
      />
    </div>
  </div>

  <div>
    <label for="dienst" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
      Waar ben je in ge&iuml;nteresseerd?
    </label>
    <select
      id="dienst"
      name="dienst"
      class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
    >
      <option value="">Selecteer een optie</option>
      <option value="workshops">Workshops & trainingen</option>
      <option value="advies">Advies & implementatie</option>
      <option value="strategie">Strategie & transformatie</option>
      <option value="websites">Websites die converteren</option>
      <option value="anders">Iets anders / weet ik nog niet</option>
    </select>
  </div>

  <div id="form-error" class="hidden rounded-lg bg-red-100 p-3 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400"></div>

  <div>
    <label for="bericht" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
      Bericht <span class="font-normal text-gray-400 dark:text-gray-500">(optioneel)</span>
    </label>
    <textarea
      id="bericht"
      name="bericht"
      rows="4"
      placeholder="Vertel kort waar je mee bezig bent of waar je tegenaan loopt"
      class="mt-1 block w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white"
    ></textarea>
  </div>

  <button
    type="submit"
    id="submit-btn"
    class="inline-flex w-full items-center justify-center rounded-lg bg-primary-600 px-6 py-3 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
  >
    Neem contact op
  </button>

  <p class="text-xs text-gray-500 dark:text-gray-400">
    Je gegevens worden alleen gebruikt om contact met je op te nemen.
  </p>
</form>

<div id="form-success" class="hidden rounded-xl py-8 text-center">
  <div class="text-5xl">&#10003;</div>
  <h3 class="mt-4 text-xl font-bold text-gray-900 dark:text-white">Bedankt!</h3>
  <p class="mt-2 text-gray-600 dark:text-gray-300">We nemen snel contact met je op.</p>
</div>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const formError = document.getElementById("form-error");
  const formSuccess = document.getElementById("form-success");
  const submitBtn = document.getElementById("submit-btn") as HTMLButtonElement;
  const emailInput = document.getElementById("email") as HTMLInputElement;
  const emailError = document.getElementById("email-error");

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  emailInput?.addEventListener("input", () => {
    emailError?.classList.add("hidden");
    emailInput.classList.remove("border-red-500");
  });

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();
    formError?.classList.add("hidden");
    emailError?.classList.add("hidden");

    const formData = new FormData(form);
    const email = (formData.get("email") as string) || "";
    const naam = (formData.get("naam") as string) || "";

    if (!naam.trim()) {
      emailInput?.focus();
      return;
    }

    if (!email || !emailRegex.test(email)) {
      if (emailError) {
        emailError.textContent = "Vul een geldig e-mailadres in";
        emailError.classList.remove("hidden");
      }
      emailInput?.classList.add("border-red-500");
      emailInput?.focus();
      return;
    }

    submitBtn.disabled = true;
    submitBtn.textContent = "Verzenden...";

    try {
      const response = await fetch("https://formsubmit.co/ajax/contact@bollenstreekdigitaal.nl", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          _subject: "Nieuw contactformulier - Bollenstreek Digitaal",
          naam: formData.get("naam"),
          email: formData.get("email"),
          bedrijfsnaam: formData.get("bedrijfsnaam"),
          telefoon: formData.get("telefoon"),
          dienst: formData.get("dienst"),
          bericht: formData.get("bericht"),
        }),
      });

      if (response.ok) {
        form.classList.add("hidden");
        formSuccess?.classList.remove("hidden");
      } else {
        if (formError) {
          formError.textContent = "Er ging iets mis. Probeer het later opnieuw.";
          formError.classList.remove("hidden");
        }
        submitBtn.disabled = false;
        submitBtn.textContent = "Neem contact op";
      }
    } catch {
      if (formError) {
        formError.textContent = "Er ging iets mis. Controleer je internetverbinding.";
        formError.classList.remove("hidden");
      }
      submitBtn.disabled = false;
      submitBtn.textContent = "Neem contact op";
    }
  });
</script>
